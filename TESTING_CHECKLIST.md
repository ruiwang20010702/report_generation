# 提升建议优化 - 测试验证清单

## 📋 测试准备

- [ ] 确认后端服务已重启（修改已热重载）
- [ ] 准备测试数据：Leo / Level 1 / Unit 1

---

## ✅ 验证点1：建议内容差异化

检查每个维度的两个建议是否有明显差异：

### Pronunciation（发音）
- [ ] 第一个建议：标题是"发音练习：单词跟读"
- [ ] 第二个建议：标题是"发音练习：句子朗读"
- [ ] 两个建议的内容和练习方法有明显不同

### Grammar（语法）
- [ ] 第一个建议：标题是"语法练习：单词应用"
- [ ] 第二个建议：标题是"语法练习：句式练习"
- [ ] 两个建议的内容和练习方法有明显不同

### Intonation（语调）
- [ ] 第一个建议：标题是"语调练习：单词重音"
- [ ] 第二个建议：标题是"语调练习：句子韵律"
- [ ] 两个建议的内容和练习方法有明显不同

---

## ✅ 验证点2：强制引用课程内容

检查是否所有建议都引用了具体的课程词汇和句式：

### 检查单词引用
- [ ] Pronunciation - 单词建议：包含2-3个具体单词（如family, brother等）
- [ ] Grammar - 单词建议：包含2-3个具体单词
- [ ] Intonation - 单词建议：包含2-3个具体单词

### 检查句子引用
- [ ] Pronunciation - 句子建议：包含1-2个具体句子
- [ ] Grammar - 句子建议：包含1-2个具体句子
- [ ] Intonation - 句子建议：包含1-2个具体句子

### 检查来源
- [ ] 所有单词都来自Level 1 Unit 1的【核心词汇】
- [ ] 所有句子都来自Level 1 Unit 1的【核心句式】
- [ ] 没有出现通用的、非课程内的例子

---

## ✅ 验证点3：课程内容不重复（新增）

检查6个建议中引用的单词和句子是否全部不同：

### 单词去重检查
收集所有建议中出现的单词，检查是否有重复：

- Pronunciation单词建议：___________________
- Grammar单词建议：___________________
- Intonation单词建议：___________________

- [ ] 以上三个建议中的单词**完全不重复**

### 句子去重检查
收集所有建议中出现的句子，检查是否有重复：

- Pronunciation句子建议：___________________
- Grammar句子建议：___________________
- Intonation句子建议：___________________

- [ ] 以上三个建议中的句子**完全不重复**

---

## ✅ 验证点4：建议质量

### 格式检查
- [ ] 每个单词都有音标标注（如 family /ˈfæməli/）
- [ ] 每个例子都有具体的练习说明
- [ ] 建议描述达到最低字数要求（至少150词）

### 内容检查
- [ ] Pronunciation建议：聚焦发音难点（如th/r/l音标）
- [ ] Grammar建议：聚焦语法规则（如时态、第三人称单数等）
- [ ] Intonation建议：聚焦韵律特征（如重音、升降调）

### 可操作性检查
- [ ] 每个建议都提供了具体的练习方法
- [ ] 练习方法清晰、可执行
- [ ] 适合学生的实际水平

---

## 🐛 常见问题排查

如果测试失败，检查以下情况：

### 问题1：建议内容仍然相似
**可能原因**：
- AI忽略了标题中的差异化指引
- 需要在prompt中添加更强的对比示例

**解决方案**：
- 添加Few-shot示例（好例子vs坏例子）
- 在系统指令中添加更强的约束

### 问题2：没有使用课程内容
**可能原因**：
- 课程内容注入失败
- AI认为"如果提供了课程大纲参考"条件不满足

**排查步骤**：
1. 检查API请求中是否包含`level`和`unit`参数
2. 检查`curriculumService.getCurriculumContext()`是否返回了正确的数据
3. 检查prompt中是否包含了课程内容部分

### 问题3：课程内容有重复
**可能原因**：
- AI没有理解"全局不重复"的要求
- 课程内容数量不足

**排查步骤**：
1. 检查Level 1 Unit 1的词汇和句式数量是否充足
2. 如果内容不足，考虑降低每个建议的例子数量
3. 如果仍然重复，考虑添加后处理验证逻辑

---

## 📊 测试记录

**测试日期**：_________________

**测试人员**：_________________

**测试结果**：
- [ ] 全部通过 ✅
- [ ] 部分通过，需要调整 ⚠️
- [ ] 未通过，需要重新优化 ❌

**备注**：

_______________________________________________

_______________________________________________

_______________________________________________

