# 🚀 快速启动指南 - 报告分享功能

## 前置条件

✅ Supabase 数据库已配置
✅ SQL 脚本已在 Supabase 执行
✅ 依赖已安装 (`@supabase/supabase-js`)

## 一键启动

```bash
# 同时启动前端和后端
npm run dev:all
```

然后访问: http://localhost:8080

## 测试分享功能（3步）

### 1️⃣ 生成报告

1. 填写表单信息
2. 保持"使用模拟数据"勾选（快速测试）
3. 点击"开始分析"

### 2️⃣ 分享报告

1. 等待分析完成
2. 点击底部的"分享报告"按钮
3. 看到"分享链接已复制！"提示

### 3️⃣ 测试链接

1. 打开新标签页或隐身窗口
2. 粘贴链接访问
3. 应该能看到完整报告

## 验证成功

✅ 后端日志显示：`✅ 报告已保存到数据库，ID: xxx`
✅ 分享按钮可见
✅ 点击分享按钮后链接被复制
✅ 访问分享链接可以看到报告
✅ 分享视图不显示分享按钮

## 功能概览

| 功能 | 描述 | 状态 |
|------|------|------|
| 自动保存 | 分析完成后自动保存到数据库 | ✅ |
| 分享按钮 | 在报告页面显示分享按钮 | ✅ |
| 复制链接 | 一键复制分享链接 | ✅ |
| 独立访问 | 通过链接访问报告 | ✅ |
| 错误处理 | 友好的错误提示 | ✅ |

## 数据库查看

想查看保存的报告？

1. 访问: https://qcifwsotfgmgfeybqzmn.supabase.co
2. 进入 "Table Editor"
3. 选择 `reports` 表
4. 查看最新记录

## API 测试

```bash
# 健康检查
curl http://localhost:3001/api/analysis/health

# 获取报告（替换 {id} 为实际的报告ID）
curl http://localhost:3001/api/analysis/report/{id}
```

## 故障排除

### 问题：分享按钮不显示
**解决**: 检查 reportId 是否存在，查看后端日志确认保存成功

### 问题：点击分享链接显示"未找到报告"
**解决**: 
- 检查报告ID是否正确
- 确认 Supabase 数据库中存在该记录
- 检查后端服务是否运行

### 问题：无法保存报告
**解决**:
- 检查 `.env` 文件中的 Supabase 配置
- 确认 SQL 脚本已执行
- 查看后端错误日志

## 下一步

查看详细文档：
- 📖 **完整功能说明**: `FEATURE_SUMMARY.md`
- 🧪 **测试指南**: `TESTING.md`
- 📝 **提交信息**: `COMMIT_MESSAGE.md`

## 需要帮助？

检查控制台日志：
- 🔵 前端日志：浏览器开发者工具 → Console
- 🟢 后端日志：运行 `npm run dev:server` 的终端

祝使用愉快！🎉
