# 📖 使用指南

## 快速开始

### 1. 准备工作

**选项 A：使用模拟数据（快速测试）**
- 无需任何准备
- 直接启动应用即可

**选项 B：使用真实 AI 分析**
- 准备 OpenAI API Key（从 https://platform.openai.com/api-keys 获取）
- 准备两个包含英语对话的视频链接

### 2. 启动应用

```bash
npm run dev:all
```

打开浏览器访问：http://localhost:8080

### 3. 使用流程

#### 方案 1：快速测试（模拟数据）

1. **填写表单**
   - 点击右上角"快速测试"按钮，自动填充示例数据
   - 或手动填写学生信息

2. **选择模式**
   - 确保"使用真实 AI 分析"开关是**关闭**状态

3. **生成报告**
   - 点击"生成学习报告"按钮
   - 等待 3-4 秒加载动画
   - 查看生成的学习报告

4. **导出长图**
   - 点击"下载长图报告"按钮
   - 等待长图生成完成
   - 报告会自动下载为PNG图片

#### 方案 2：真实 AI 分析

1. **准备视频**
   - 需要两个公开可访问的视频 URL
   - 视频必须包含音频内容
   - 推荐长度：3-10 分钟
   - 示例格式：
     ```
     https://example.com/student-lesson-week1.mp4
     https://example.com/student-lesson-week4.mp4
     ```

2. **填写表单**
   - 学生姓名：例如"小明"
   - 年级：选择合适的年级
   - 级别：选择 51Talk 级别
   - 单元：选填
   - 视频链接 1：粘贴较早的视频 URL
   - 视频链接 2：粘贴较新的视频 URL

3. **启用 AI 分析**
   - 打开"使用真实 AI 分析"开关
   - 输入 OpenAI API Key（以 `sk-` 开头）

4. **提交分析**
   - 点击"生成学习报告"
   - 等待 30-60 秒（取决于视频长度）
   - 可在浏览器开发者工具的控制台查看进度

5. **查看结果**
   - 系统将显示基于真实 AI 分析的学习报告
   - 包含：
     - 学习数据对比
     - 四大进步维度分析
     - 待改进领域详解

6. **导出报告**
   - 点击"下载长图报告"保存为PNG图片

## 📊 报告内容解读

### 关键学习数据
- **举手次数**：课堂参与度指标
- **回答长度**：语言表达完整性
- **完整句子使用率**：语法结构规范性
- **阅读准确率**：发音和流利度

### 四大进步维度
1. **流利度**：说话流畅度、停顿情况
2. **自信度**：表达自信心、声音洪亮度
3. **语言应用**：词汇丰富度、语言灵活性
4. **句型复杂度**：句式结构的复杂程度

### 待提升领域
- **发音准确性**：具体单词的发音问题
- **语法细节**：常见语法错误
- **语调与节奏**：语调起伏和说话节奏

## 🎯 最佳实践

### 视频准备建议
1. **视频长度**：3-10 分钟最佳
2. **时间间隔**：两个视频之间建议间隔 2-4 周
3. **音频质量**：确保声音清晰可辨
4. **内容类型**：
   - ✅ 推荐：课堂对话、问答互动、朗读练习
   - ❌ 不推荐：纯粹的听力练习、背景音乐过大

### 视频来源
- **51Talk 课堂录像**：最理想的分析素材
- **在线课程录屏**：Zoom、腾讯会议等
- **自录练习视频**：手机/电脑录制的练习视频

### 如何获取公开 URL

#### 方法 1：云存储服务
1. 上传视频到 Google Drive、Dropbox、OneDrive
2. 设置为"任何人可访问"
3. 获取共享链接

#### 方法 2：视频托管平台
1. 上传到 YouTube（可设为"不公开"）
2. 使用在线工具下载视频并获取直链

#### 方法 3：自建服务器
1. 部署简单的文件服务器
2. 将视频放在公开目录
3. 使用完整 URL 访问

## 💡 常见问题

### Q1: 为什么卡在加载动画？
**A**: 可能的原因：
- 视频 URL 无法访问
- API Key 无效或余额不足
- 网络连接问题

**解决方案**：
1. 打开浏览器开发者工具（F12）
2. 查看 Console 控制台的错误信息
3. 检查 Network 网络请求状态
4. 参考 [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)

### Q2: 分析结果不准确？
**A**: 可能的原因：
- 视频音频质量差
- 背景噪音过大
- 学生说话声音太小

**改进建议**：
- 使用音质更好的视频
- 确保录音环境安静
- 调整麦克风音量

### Q3: 成本太高？
**A**: 降低成本的方法：
- 使用较短的视频片段（3-5 分钟）
- 先用模拟数据测试 UI
- 批量分析以分摊成本

### Q4: 可以分析中文视频吗？
**A**: 技术上可以，但：
- 当前系统设计用于英语学习
- 提示词和报告格式针对英语优化
- 如需分析中文，需修改提示词

### Q5: 支持哪些视频格式？
**A**: Whisper API 支持：
- MP4, MP3, WAV, M4A, MPEG
- WebM, FLAC, OGG
- 最大文件大小：25 MB

## 🔒 隐私与安全

### API Key 安全
- **前端输入的 API Key**：仅在请求中使用，不会被存储
- **服务器端 API Key**：仅存储在 `.env` 文件中（不会提交到 Git）

### 视频隐私
- 视频通过 URL 下载到服务器临时目录
- 分析完成后立即删除
- 不会永久存储视频文件

### 数据保留
- 当前版本不保存任何分析历史
- 每次分析独立进行
- 未来可选功能：历史记录存储（需数据库）

## 📈 下一步

### 推荐阅读
- [test-ai-analysis.md](./test-ai-analysis.md) - 详细测试指南
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - 故障排除
- [README.md](./README.md) - 完整项目文档

### 扩展功能（未来计划）
- 视频文件上传（无需 URL）
- 实时进度显示
- GPT-4 Vision 集成（分析表情）
- 历史报告管理
- 多学生对比

## 🆘 获取帮助

遇到问题？
1. 查看 [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)
2. 检查浏览器控制台错误
3. 查看后端服务器日志
4. 提交 Issue 到项目仓库

祝您使用愉快！🎉

